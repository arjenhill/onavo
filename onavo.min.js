/**
 * onavojs v0.17
 * @ 开发 p_jiewwang p_dainli p_miyagong
 * { JavaScript 工具库 }
 * github@ https://github.com/jiayi2/onavo
 * email:email@ahthw.com
 * @Organizations https://github.com/3JTeam
 * $$代表onavojs库/Object的对象
 */
;var $$,$$T,$$TB,$$A,$$S,$$D,$$jx,$$F,$$E,$$CE;(function(undefined){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(this==null){throw new TypeError('"this" is null or not defined');}var O=Object(this);var len=O.length>>>0;if(len===0){return-1}var n=+fromIndex||0;if(Math.abs(n)===Infinity){n=0}if(n>=len){return-1}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===searchElement){return k}k++}return-1}}var O,T,TB,A,S,D,jx,F,E,CE;O=function(id){return"string"==typeof id?document.getElementById(id):id};O.type={getType:function(ele){if(!ele)return undefined;if(window==document&&document!=window){return'window'}else if(ele.nodeType===9){return'document'}else if(ele.callee){return'arguments'}else if(isFinite(ele.length)&&ele.item){return'nodeList'}else{var temp=Object.prototype.toString.call(ele),reg=/\[object (.*)\]/,arr=reg.exec(temp);return arr[1].toLowerCase()}},isArray:function(ele){return(this.getType(ele)==='array')?true:false},isFunction:function(ele){return(this.getType(ele)==='function')?true:false},isObject:function(ele){return(this.getType(ele)==='object')?true:false},isString:function(ele){return(this.getType(ele)==='string')?true:false},isNumber:function(ele){return(this.getType(ele)==='number')?true:false},isBoolen:function(ele){return(this.getType(ele)==='boolean')?true:false},isUndefined:function(ele){return(this.getType(ele)==='undefined')?true:false},isNull:function(ele){return(this.getType(ele)==='null')?true:false}};O.emptyFun=function(){};O.extend=function(destination,source,override){if(override===undefined)override=true;for(var property in source){if(override||!(property in destination)){destination[property]=source[property]}}return destination};O.deepextend=function(destination,source){for(var property in source){var copy=source[property];if(destination===copy)continue;if(typeof copy==="object"){destination[property]=arguments.callee(destination[property]||{},copy)}else{destination[property]=copy}}return destination};O.warpp=function(me,parent){var ins=function(){me.apply(this,arguments)};var subclass=function(){};subclass.prototype=parent.prototype;ins.prototype=new subclass;return ins};T={jsload:function(name,callback){var newJs=document.createElement('script');newJs.onreadystatechange=function(){if(newJs.readyState==='loaded'||newJs.readyState==='complete'){newJs.onreadystatechange=null;callback&&callback()}};newJs.onload=function(){callback&&callback()};newJs.src=name;document.documentElement.firstChild.appendChild(newJs)},cssload:function(url,callback){if(!url){showError('cssload=>异步加载的url地址不正确')}if(document.createStyleSheet){document.createStyleSheet(url);callback&&callback()}else{var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href=url;callback&&callback();document.documentElement.firstChild.appendChild(link)}}};TB=(function(ua){var B={mobile:(/iphone|nokia|sony|ericsson|mot|samsung|sgh|lg|philips|panasonic|alcatel|lenovo|cldc|midp|wap|android|iPod/i.test(ua)),ios:!!ua.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:ua.match(/android/i)=="android",iPhone:ua.match(/iphone os/i)=="iphone os",iPad:ua.match(/ipad/i)=="ipad",webApp:ua.indexOf('Safari')==-1,chrome:/chrome/.test(ua),firefox:/firefox/.test(ua),safari:/webkit/.test(ua)&&!/chrome/.test(ua),opera:/opera/.test(ua)};var IE=function(){var sys={};var s;(s=ua.match(/rv:([\d.]+)\) like gecko/))?sys.ie=s[1]:(s=ua.match(/msie ([\d.]+)/))?sys.ie=s[1]:0;var _version=parseInt(sys.ie,10);if(sys.ie){return{is:true,version:_version}};return false};var weixin=function(){if(ua.match(/MicroMessenger/i)=="micromessenger"){return true}else{return false}};var cookie={read:function(name){var cookieStr="; "+document.cookie+"; ";var index=cookieStr.indexOf("; "+name+"=");if(index!=-1){var s=cookieStr.substring(index+name.length+3,cookieStr.length);return unescape(s.substring(0,s.indexOf("; ")))}else{return null}},set:function(name,value,expires){var expDays=expires*24*60*60*1000;var expDate=new Date();expDate.setTime(expDate.getTime()+expDays);var expString=expires?"; expires="+expDate.toGMTString():"";var pathString=";path=/";document.cookie=name+"="+escape(value)+expString+pathString},del:function(name){var exp=new Date(new Date().getTime()-1);var s=this.read(name);if(s!=null){document.cookie=name+"="+s+"; expires="+exp.toGMTString()+";path=/"}}};return{B:B,IE:IE,weixin:weixin,cookie:cookie}})(window.navigator.userAgent.toLowerCase());if(TB.IE().version==6){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}};A=function(){var ret={isArray:function(obj){return Object.prototype.toString.call(obj)==="[object Array]"},unique:function(target){var temp=[];_that:for(var i=0,len=target.length;i<len;i++){for(var j=i+1;j<len;j++){if(target[i]===target[j]){continue _that}}temp.push(target[i])}return temp},random:function(target){return target[Math.floor(Math.random()*target.length)]},shuffle:function(target){if(!target.length==0){var temp=target,j,x,i=target.length;for(;i>0;j=parseInt(Math.random()*i),x=target[--i],target[i]=target[j],target[j]=x){}return temp};return},contains:function(target,item){return target.indexOf(item)>-1},removeAt:function(target,index){return!!target.splice(index,1).length},remove:function(target,item){var index=target.indexOf(item);return index>-1?this.removeAt(target,index):false},compact:function(target){if(!type.isArray(target)){throw new Error('target error type');}return target.filter(function(item){return item!=undefined})},pluck:function(target,name){var result=[],temp;target.forEach(function(item){temp=item[name];if(temp!=null){result.push(temp)}});return result},union:function(t1,t2){return this.unique(t1.concat(t2))},intersect:function(t1,t2){return t1.filter(function(item){return~t2.indexOf(item)})},diff:function(t1,t2){var r=t1;for(var i=0;i<t1.length;i++){for(var j=0;j<t2.length;j++){if(r[i]===t2[j]){r.splice(i,1);i--;break}}}return r},max:function(target){return Array.max.apply(0,target)},min:function(target){return Array.min.apply(0,target)},indexOf:function(array,elt,from){if(array.indexOf){return isNaN(from)?array.indexOf(elt):array.indexOf(elt,from)}else{var len=array.length;from=isNaN(from)?0:from<0?Math.ceil(from)+len:Math.floor(from);for(;from<len;from++){if(array[from]===elt)return from}return-1}},lastIndexOf:function(array,elt,from){if(array.lastIndexOf){return isNaN(from)?array.lastIndexOf(elt):array.lastIndexOf(elt,from)}else{var len=array.length;from=isNaN(from)||from>=len-1?len-1:from<0?Math.ceil(from)+len:Math.floor(from);for(;from>-1;from--){if(array[from]===elt)return from}return-1}}};function each(object,callback){if(undefined===object.length){for(var name in object){if(false===callback(object[name],name,object))break}}else{for(var i=0,len=object.length;i<len;i++){if(i in object){if(false===callback(object[i],i,object))break}}}};each({forEach:function(object,callback,thisp){each(object,function(){callback.apply(thisp,arguments)})},map:function(object,callback,thisp){var ret=[];each(object,function(){ret.push(callback.apply(thisp,arguments))});return ret},filter:function(object,callback,thisp){var ret=[];each(object,function(item){callback.apply(thisp,arguments)&&ret.push(item)});return ret},every:function(object,callback,thisp){var ret=true;each(object,function(){if(!callback.apply(thisp,arguments)){ret=false;return false}});return ret},some:function(object,callback,thisp){var ret=false;each(object,function(){if(callback.apply(thisp,arguments)){ret=true;return false}});return ret}},function(method,name){ret[name]=function(object,callback,thisp){if(object[name]){return object[name](callback,thisp)}else{return method(object,callback,thisp)}}});return ret}();S={trim:function(str){str=str.replace(/^\s+/,'');for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.slice(0,i+1);break}}return str},print:function(str,object){var arr=[].slice.call(arguments,1),index;return str.replace(/#{([^{}]+)}/gm,function(match,name){index=Number(name);if(index>=0){return arr[index]}if(object&&object[name]!==''){return object[name]}return''})},fillZero:function(target,n){var z=new Array(n).join('0'),str=z+target,result=str.slice(-n);return result},stripTags:function(target){if(type.getType(target)==='String'){return target.replace(/<script[^>]*>(\S\s*?)<\/script>/img,'').replace(/<[^>]+>/g,'')}},capitalize:function(target){return target.charAt(0).toUpperCase()+target.slice(1).toLowerCase()},camelize:function(target){if(target.indexOf('-')<0&&target.indexOf('_')<0){return target}return target.replace(/[-_][^-_]/g,function(match){return match.charAt(1).toUpperCase()})},underscored:function(target){return target.replace(/([a-z0-9])([A-Z])/g,'$1_$2').toLowerCase()},dasherize:function(target){return this.underscored(target).replace(/_/g,'-')},truncate:function(target,len,truncation){len=len||30;truncation=truncation?truncation:'...';return(target.length>len)?target.slice(0,(len-truncation.length))+truncation:target.toString()},byteLen:function(str,charset){var target=0,charCode,i,len;charset=charset?charset.toLowerCase():'';if(charset==='utf-16'||charset==='utf16'){for(i=0,len=str.length;i<len;i++){charCode=str.charCodeAt(i);if(charCode<=0xffff){target+=2}else{target+=4}}}else{for(i=0,len=str.length;i<len;i++){charCode=str.charCodeAt(i);if(charCode<=0x007f){target+=1}else if(charCode<=0x07ff){target+=2}else if(charCode<=0xffff){target+=3}else{target+=4}}}return target},repeat:function(item,times){var s=item,target='';while(times>0){if(times%2==1){target+=s}if(times==1){break}s+=s;times=times>>1}return target},endsWith:function(target,item,ignorecase){var str=target.slice(-(item.length));return ignorecase?str.toLowerCase()===item.toLowerCase():str===item},startsWith:function(target,item,ignorecase){var str=target.slice(0,item.length);return ignorecase?str.toLowerCase()===item.toLowerCase():str===item},containsClass:function(target,item,separator){return separator?(separator+target+separator).indexOf(separator+item+separator)>-1:this.contains(target,item)},contains:function(target,item){return target.indexOf(item)!=-1}};D={getScrollTop:function(node){var doc=node?node.ownerDocument:document;return doc.documentElement.scrollTop||doc.body.scrollTop},getScrollLeft:function(node){var doc=node?node.ownerDocument:document;return doc.documentElement.scrollLeft||doc.body.scrollLeft},contains:document.defaultView?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!=b&&a.contains(b)},getRect:function(node){var left=0,top=0,right=0,bottom=0;if(!node.getBoundingClientRect||TB.IE().version==8){var n=node;while(n){left+=n.offsetLeft,top+=n.offsetTop;n=n.offsetParent};right=left+node.offsetWidth;bottom=top+node.offsetHeight}else{var rect=node.getBoundingClientRect();left=right=D.getScrollLeft(node);top=bottom=D.getScrollTop(node);left+=rect.left;right+=rect.right;top+=rect.top;bottom+=rect.bottom};return{"left":left,"top":top,"right":right,"bottom":bottom}},getClientRect:function(node){var rect=D.getRect(node),sLeft=D.getScrollLeft(node),sTop=D.getScrollTop(node);rect.left-=sLeft;rect.right-=sLeft;rect.top-=sTop;rect.bottom-=sTop;return rect},curStyle:document.defaultView?function(elem){return document.defaultView.getComputedStyle(elem,null)}:function(elem){return elem.currentStyle},getStyle:document.defaultView?function(elem,name){var style=document.defaultView.getComputedStyle(elem,null);return name in style?style[name]:style.getPropertyValue(name)}:function(elem,name){var style=elem.style,curStyle=elem.currentStyle;if(name=="opacity"){if(/alpha\(opacity=(.*)\)/i.test(curStyle.filter)){var opacity=parseFloat(RegExp.$1);return opacity?opacity/100:0}return 1}if(name=="float"){name="styleFloat"}var ret=curStyle[name]||curStyle[S.camelize(name)];if(!/^-?\d+(?:px)?$/i.test(ret)&&/^\-?\d/.test(ret)){var left=style.left,rtStyle=elem.runtimeStyle,rsLeft=rtStyle.left;rtStyle.left=curStyle.left;style.left=ret||0;ret=style.pixelLeft+"px";style.left=left;rtStyle.left=rsLeft}return ret},setStyle:function(elems,style,value){if(!elems.length){elems=[elems]}if(typeof style=="string"){var s=style;style={};style[s]=value}A.forEach(elems,function(elem){for(var name in style){var value=style[name];if(name=="opacity"&&B.ie){elem.style.filter=(elem.currentStyle&&elem.currentStyle.filter||"").replace(/alpha\([^)]*\)/,"")+" alpha(opacity="+(value*100|0)+")"}else if(name=="float"){elem.style[B.ie?"styleFloat":"cssFloat"]=value}else{elem.style[S.camelize(name)]=value}}})},getSize:function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;if(!width&&!height){var repair=!D.contains(document.body,elem),parent;if(repair){parent=elem.parentNode;document.body.insertBefore(elem,document.body.childNodes[0])}var style=elem.style,cssShow={position:"absolute",visibility:"hidden",display:"block",left:"-9999px",top:"-9999px"},cssBack={position:style.position,visibility:style.visibility,display:style.display,left:style.left,top:style.top};D.setStyle(elem,cssShow);width=elem.offsetWidth;height=elem.offsetHeight;D.setStyle(elem,cssBack);if(repair){parent?parent.appendChild(elem):document.body.removeChild(elem)}}return{"width":width,"height":height}},nextB:function(el){return(el.nextElementSibling)?el.nextElementSibling:el.nextSibling},prevB:function(el){return(el.previousElementSibling)?el.previousElementSibling:el.previousSibling},nextBs:function(el){var arr=[],curr=this.nextB(el);while(curr&&curr.nodeType===1){arr.push(curr);curr=this.nextB(curr)}return arr},prevBs:function(el){var arr=[],curr=this.prevB(el);while(curr&&curr.nodeType===1){arr.push(curr);curr=this.prevB(curr)}return arr}};jx={getHTTPObject:function(){var http=false;if(typeof ActiveXObject!='undefined'){try{http=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http=new ActiveXObject("Microsoft.XMLHTTP")}catch(E){http=false}}}else if(window.XMLHttpRequest){try{http=new XMLHttpRequest()}catch(e){http=false}};return http},load:function(url,callback,format){var http=this.init();if(!http||!url)return;if(http.overrideMimeType)http.overrideMimeType('text/xml');if(!format)var format="text";format=format.toLowerCase();var now="uid="+new Date().getTime();url+=(url.indexOf("?")+1)?"&":"?";url+=now;http.open("GET",url,true);http.onreadystatechange=function(){if(http.readyState==4){if(http.status==200){var result="";if(http.responseText)result=http.responseText;if(format.charAt(0)=="j"){result=result.replace(/[\n\r]/g,"");result=eval('('+result+')')};if(callback)callback(result)}else{if(error)error(http.status)}}};http.send(null)},init:function(){return this.getHTTPObject()}};F=(function(){var slice=Array.prototype.slice;return{bind:function(fun,thisp){var args=slice.call(arguments,2);return function(){return fun.apply(thisp,args.concat(slice.call(arguments)))}},bindAsEventListener:function(fun,thisp){var args=slice.call(arguments,2);return function(event){return fun.apply(thisp,[E.fixEvent(event)].concat(args))}}}})();E=(function(){var addEvent,removeEvent,guid=1,storage=function(element,type,handler){if(!handler.$$guid)handler.$$guid=guid++;if(!element.events)element.events={};var handlers=element.events[type];if(!handlers){handlers=element.events[type]={};if(element["on"+type]){handlers[0]=element["on"+type]}}};if(window.addEventListener){var fix={"mouseenter":"mouseover","mouseleave":"mouseout"};addEvent=function(element,type,handler){if(type in fix){storage(element,type,handler);var fixhandler=element.events[type][handler.$$guid]=function(event){var related=event.relatedTarget;if(!related||(element!=related&&!(element.compareDocumentPosition(related)&16))){handler.call(this,event)}};element.addEventListener(fix[type],fixhandler,false)}else{element.addEventListener(type,handler,false)}};removeEvent=function(element,type,handler){if(type in fix){if(element.events&&element.events[type]){element.removeEventListener(fix[type],element.events[type][handler.$$guid],false);delete element.events[type][handler.$$guid]}}else{element.removeEventListener(type,handler,false)}}}else{addEvent=function(element,type,handler){storage(element,type,handler);element.events[type][handler.$$guid]=handler;element["on"+type]=handleEvent};removeEvent=function(element,type,handler){if(element.events&&element.events[type]){delete element.events[type][handler.$$guid]}};function handleEvent(){var returnValue=true,event=fixEvent();var handlers=this.events[event.type];for(var i in handlers){this.$$handleEvent=handlers[i];if(this.$$handleEvent(event)===false){returnValue=false}}return returnValue}}function fixEvent(event){if(event)return event;event=window.event;event.pageX=event.clientX+D.getScrollLeft(event.srcElement);event.pageY=event.clientY+D.getScrollTop(event.srcElement);event.target=event.srcElement;event.stopPropagation=stopPropagation;event.preventDefault=preventDefault;var relatedTarget={"mouseout":event.toElement,"mouseover":event.fromElement}[event.type];if(relatedTarget){event.relatedTarget=relatedTarget}return event};function stopPropagation(){this.cancelBubble=true};function preventDefault(){this.returnValue=false};return{"addEvent":addEvent,"removeEvent":removeEvent,"fixEvent":fixEvent}})();CE=(function(){var guid=1;return{addEvent:function(object,type,handler){if(!handler.$$$guid)handler.$$$guid=guid++;if(!object.cusevents)object.cusevents={};if(!object.cusevents[type])object.cusevents[type]={};object.cusevents[type][handler.$$$guid]=handler},removeEvent:function(object,type,handler){if(object.cusevents&&object.cusevents[type]){delete object.cusevents[type][handler.$$$guid]}},fireEvent:function(object,type){if(!object.cusevents)return;var args=Array.prototype.slice.call(arguments,2),handlers=object.cusevents[type];for(var i in handlers){handlers[i].apply(object,args)}},clearEvent:function(object){if(!object.cusevents)return;for(var type in object.cusevents){var handlers=object.cusevents[type];for(var i in handlers){handlers[i]=null}object.cusevents[type]=null}object.cusevents=null}}})();$$=O;$$T=T;$$TB=TB;$$A=A;$$S=S;$$D=D;$$jx=jx;$$F=F;$$E=E;$$CE=CE})();